"""
한국 GTFS 전처리기 설정 파일
"""
from pathlib import Path

# =============================================================================
# 경로 설정
# =============================================================================

# 기본 경로
BASE_DIR = Path("C:/Users/USER/OneDrive/Desktop/연구실/otp핵심")

# 입력 경로 (원본 한국 GTFS)
INPUT_DIR = BASE_DIR / "raw" / "gtfs"

# 출력 경로 (변환된 OTP 호환 GTFS)
OUTPUT_DIR = BASE_DIR / "korean-otp" / "data" / "gtfs"

# 도시철도환승정보 엑셀 파일
TRANSFER_XLSX = INPUT_DIR / "202303_GTFS_도시철도환승정보.xlsx"

# =============================================================================
# route_type 매핑 테이블
# =============================================================================
# 한국 KTDB의 route_type → 표준 GTFS route_type 변환
#
# 한국 코드 | 한국 의미          | 변환 코드 | OTP 의미
# ---------+-------------------+----------+---------
#    0     | 시내/농어촌/마을버스|    3     | BUS
#    1     | 도시철도/경전철    |    1     | SUBWAY
#    2     | 해운              |    4     | FERRY
#    3     | 시외버스          |    3     | BUS
#    4     | 일반철도          |    2     | RAIL
#    5     | 공항리무진버스    |    3     | BUS
#    6     | 고속철도          |    2     | RAIL
#    7     | 항공              |   1100   | AIRPLANE (TPEG 확장)

ROUTE_TYPE_MAPPING = {
    0: 3,     # 시내/농어촌/마을버스 → BUS
    1: 1,     # 도시철도/경전철 → SUBWAY
    2: 4,     # 해운 → FERRY
    3: 3,     # 시외버스 → BUS
    4: 2,     # 일반철도 → RAIL
    5: 3,     # 공항리무진버스 → BUS
    6: 2,     # 고속철도 → RAIL
    7: 1100,  # 항공 → AIRPLANE (TPEG)
}

# 한국 route_type 설명 (로깅용)
ROUTE_TYPE_NAMES_KR = {
    0: "시내/농어촌/마을버스",
    1: "도시철도/경전철",
    2: "해운",
    3: "시외버스",
    4: "일반철도",
    5: "공항리무진버스",
    6: "고속철도",
    7: "항공",
}

# OTP route_type 설명 (로깅용)
ROUTE_TYPE_NAMES_OTP = {
    0: "TRAM",
    1: "SUBWAY",
    2: "RAIL",
    3: "BUS",
    4: "FERRY",
    5: "CABLE_CAR",
    6: "GONDOLA",
    7: "FUNICULAR",
    11: "TROLLEYBUS",
    12: "MONORAIL",
    1100: "AIRPLANE",
}

# =============================================================================
# 파일 목록
# =============================================================================

# BOM만 제거하고 복사할 파일들 (변환 불필요)
COPY_ONLY_FILES = [
    "agency.txt",
    "calendar.txt",
    "stops.txt",
    "trips.txt",
]

# 변환이 필요한 파일들
CONVERT_FILES = {
    "routes.txt": "route_type 변환",
    "stop_times.txt": "stop_sequence 정수화",
}

# =============================================================================
# 처리 설정
# =============================================================================

# stop_times.txt 청크 크기 (대용량 파일 처리용)
CHUNK_SIZE = 1_000_000

# 진행 상황 출력 간격 (청크 단위)
PROGRESS_INTERVAL = 5
